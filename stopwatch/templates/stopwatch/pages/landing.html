{% extends "base.html" %}
{% load static wagtailcore_tags wagtailimages_tags ckbootstrap_tags wagtailembeds_tags %}

{% block content %}

{% if self.newsflash_category %}
  <div id="news-ticker"></div>
{% endif %}

<header class="position-relative bg-panel border-bottom border-1 border-midgrey">
  <div class="position-absolute container-fluid py-3 z-2 text-white">
    <h1>
      {{self.page_description}}
    </h1>
  </div>

  <div>
    {% if self.photo %}
      {% image self.photo height-500 class="img-fluid" %}
    {% endif %}
  </div>
</header>

{% if self.tab_data %}
  <ul class="nav nav-tabs full-bleed" id="tabs" role="tablist">
    {% for item in self.tab_data %}
      <li class="nav-item" role="presentation">
        <button class="btn {% if forloop.first %} active{% endif %}" id="{{item.meta.title|slugify}}-tab" data-bs-toggle="tab" data-bs-target="#{{item.meta.title|slugify}}-content" type="button" role="tab" aria-controls="{{item.meta.title|slugify}}-content" aria-selected="{% if forloop.first %}true{% else %}false{% endif %}">
          {{item.meta.title}}
        </button>
      </li>
    {% endfor %}
  </ul>

  <div class="tab-content full-bleed border-bottom border-1 border-midgrey" id="content">
    {% for item in self.tab_data %}
      <div class="tab-pane container fade show{% if forloop.first %} active{% endif %}" id="{{item.meta.title|slugify}}-content" role="tabpanel" aria-labelledby="{{item.meta.title|slugify}}-tab">
        {% include "stopwatch/includes/landing_tab.html" with self=item.meta only %}
      </div>
    {% endfor %}
  </div>
{% endif %}

<main class="container streamfield">
  {% include_block self.body %}
</main>

{% endblock content %}


{% block extra_js %}

{% if self.newsflash_category %}
  {% include "stopwatch/includes/news_ticker_js.html" with items=self.newsflash_category.featured_items only %}
{% endif %}

{% endblock %}