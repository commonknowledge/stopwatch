{% extends "projects/base.html" %}
{% load static wagtailcore_tags wagtailimages_tags ckdjango_tags ckbootstrap_tags wagtailembeds_tags %}

{% block project_content %}

<main class="py-5 project-theme container container-outline streamfield">
  <h2 class="mb-4 d-md-none">Events</h2>

  <div class="row">
    <form
      data-filter-form
      method="GET"
      class="col-8 form-unraised d-flex flex-row align-items-md-start col-md-3 col-lg-2 flex-column"
    >
      <h3 class="microcopy">Filters</h3>

      <div class="col-8 overflow-auto text-nowrap flex-column d-flex">
        {% filter_toggles field=filter_form.theme label_class="btn me-2 mb-2" %}
      </div>
    </form>

    <div class="col container-fluid" {% infinite_scroll_container %}>
      <h2 class="mb-4 d-none d-md-block">Events</h2>

      <div class="row g-3">
        {% for event in child_list_page %}
          <div class="col-8">
            <article class="p-3 bg-white iscroll_item">
              <div class="mb-3 d-flex flex-direction-column justify-content-between microcopy">
                <div class="me-2 text-nowrap">
                  <span class="color-circle me-1" style="background-color: {{event.theme.color}};"></span>
                  {{event.theme.title}}
                </div>
    
                <div class="text-end">
                  <div class="d-inline-block me-2 text-nowrap">
                    {{event.start_time|date:"D d.m.y"}}
                  </div>
                  <div class="d-inline-block me-2 text-nowrap">
                    {{event.start_time|date:"H:i"}}â€“{{event.end_time|date:"H:i"}}
                  </div>
                </div>
              </div>
    
              <div class="mb-4">
                <h3 class="my-3">
                  {{event.title}}
                </h3>
    
                {{event.intro_text|richtext}}
              </div>
    
              <div class="mb-1">
                {% for speaker in event.speakers %}
                  {% include "stopwatch/includes/avatar.html" with person=speaker %}
                {% endfor %}
              </div>
    
              <div>
                <a href="{{event.registration_page}}" class="btn btn-outline-secondary w-100">
                  Register
                </a>
              </div>
            </article>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</main>

{% endblock project_content %}

{% block extra_js %}
{% bind_filter_form %}
{% endblock %}